@using Radyn.Web.Mvc;
@using Radyn.WebApp
@using Radyn.WebApp.Areas.Congress.Tools
@using Radyn.WebApp.Areas.FormGenerator.Tools
@model IEnumerable<Radyn.Congress.DataStructure.WorkShopUser>
    @{
        ViewBag.Title = @Resources.Common.List + " " + @Resources.Congress.WorkShop;
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    @section Head{
        <script type="text/javascript">

            function UpdateWorkShopsRequest() {
                ShowPostBackLoader();
                $.post("@Url.Content("~/Congress/ManagmentPanel/UpdateUserRequestWorkShops")", $('form[action^="@Url.Content("~/Congress/ManagmentPanel/UserRequestWorkShops")"]').serialize(), function (data) {
                    if (data != "false") {
                        SearchWorkShop();
                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();
                });

            }
            function DesginReport() {
                ShowPostBackLoader();
                $.post("@Url.Content("~/Congress/Reportpanel/DesginWorkShopUserReport")", $('form[action^="@Url.Content("~/Congress/ManagmentPanel/UserRequestWorkShops")"]').serialize(), function (data) {
                    if (data.Result != false) {
                        window.open("@Url.Content("~/ReportBuilder/ReportDesign?DataMethod=PreaperReport")&DataMethodParamets=" + data.ReportId + "&UpdateMethod=UpdateReport&UpdateParametrs=" + data.ReportId);
                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();
                });

            }
            function SearchWorkShop() {
                ShowPostBackLoader();
                $("#DivResult").html("");
                $.post("@Url.Content("~/Congress/ManagmentPanel/UserRequestWorkShops")", $('form[action^="@Url.Content("~/Congress/ManagmentPanel/UserRequestWorkShops")"]').serialize(), function (data) {
                    if (data != "false") {
                        $("#DivResult").html(data).slideDown("slow");;
                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();
                });

            }
            function PrintList() {
                ShowPostBackLoader();
                $.post("@Url.Content("~/Congress/ReportPanel/PrintUserRequestWorkShops")", $('form[action^="@Url.Content("~/Congress/ManagmentPanel/UserRequestWorkShops")"]').serialize(), function (data) {
                    if (data != "false") {
                         window.open('@Url.Content("~/ReportBuilder/ReportView")');

                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();
                });

            }
            function ModifyWorkShopUser(userId,state) {
                ShowModal("@Url.Content("~/Congress/ManagmentPanel/GetModifyUserWorkShop")", { userId: userId, workshopId: '@ViewBag.WorkShopId', status: state});


            }
            $(document).ready(function () {

                SearchWorkShop();

            });
        </script>
    }
    @section PageTitle
{
        @Resources.Congress.RezervList @ViewBag.WorkShop
    }
    @section PageAction
    {
        <div class="button-div m-btn waves-green i-save" id="BtnUpdate">
            @{Html.Radyn().ImageActionLink().Text(@Resources.Common.Save).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Save.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "UpdateWorkShopsRequest()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-yellow i-add ">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.ReserveWorkShopNew).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Add.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "ModifyWorkShopUser('" + null + "','" + PageMode.Create + "')" }).Render(); }

        </div>
        <div class="button-div m-btn waves-purple i-brush" id="DivDesginReport">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.DesignWorkShopReport).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/certificate-design.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "DesginReport()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-blue i-print" id="BtnReport">
            @{Html.Radyn().ImageActionLink().Text(@Resources.Common.Print).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/printer.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "PrintList()" }).Render(); }
        </div>

        <div class="button-div m-btn waves-red i-return">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/WorkShop/Index")).Text(@Resources.Common.Return).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/go-back.png")).ImagePosition(ImageActionLink.Position.Right).Render();}
        </div>


    }
    @section PageActionDown
{
        <div class="button-div m-btn waves-green i-save" id="BtnUpdate1">
            @{Html.Radyn().ImageActionLink().Text(@Resources.Common.Save).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Save.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "UpdateWorkShopsRequest()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-yellow i-add ">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.ReserveWorkShopNew).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Add.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "ModifyWorkShopUser('" + null + "','" + PageMode.Create + "')" }).Render(); }

        </div>
        <div class="button-div m-btn waves-purple i-brush" id="DivDesginReport1">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.DesignWorkShopReport).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/certificate-design.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "DesginReport()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-blue i-print" id="BtnReport1">
            @{Html.Radyn().ImageActionLink().Text(@Resources.Common.Print).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/printer.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "PrintList()" }).Render(); }
        </div>

        <div class="button-div m-btn waves-red i-return">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/WorkShop/Index")).Text(@Resources.Common.Return).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/go-back.png")).ImagePosition(ImageActionLink.Position.Right).Render();}

        </div>
    }

    <input type="hidden" value="@ViewBag.WorkShopId" name="WorkShopId" id="WorkShopId" />
    <div class="radynForm">
        <div class="fit item-row">
            <div class="table-row-cap">
                <div class="item">
                    @Resources.Congress.User
                </div>
            </div>
            <div class="table-row-item ">
                <div class="item">
                    @Html.TextBox("txtSearch")
                </div>
            </div>
        </div>
        <div class="fit">
            <div class="item-row">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.Status
                    </div>
                </div>
                <div class="table-row-item">
                    <div class="item">
                        @Html.DropDownList("SearchStatus", new SelectList(ViewBag.status, "Key", "Value"), "")
                    </div>
                </div>
            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.RegisterDate
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item date-picker">
                        @{Html.Radyn().PersianDateTimePicker().Name("RegisterDate").ID("RegisterDate").Render(); }
                    </div>
                </div>
            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                    </div>
                </div>
                <div class="table-row-item">
                    <div class="item">
                        <div class="m-btn waves-blue i-search" id="BtnSearch" style="margin:0">
                            @{Html.Radyn().ImageActionLink().Text(@Resources.Common.Search).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/search_button.png")).ImagePosition(ImageActionLink.Position.Right).ImageWidth("25").ImageHeight("25").OtherAttribute(new { onclick = "SearchWorkShop()" }).Render(); }
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div>
            @{
                Html.FormReportGenerator(AppExtention.CongressMoudelName + "-/Congress/WorkShop/WorkShop");
            }
        </div>
        <div class="fit" id="DivResult">
        </div>
    </div>






