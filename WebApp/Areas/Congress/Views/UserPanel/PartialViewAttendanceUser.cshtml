@using Radyn.Congress.Tools
@using Radyn.FileManager
@using Radyn.FormGenerator.Tools
@using Radyn.Utility
@using Radyn.Web.Mvc
@using Radyn.WebApp.Areas.Congress.Tools
@using Radyn.WebApp.Areas.EnterpriseNode.ExtentionTools
@using Radyn.WebApp.Areas.FormGenerator.Tools

@model IEnumerable<Radyn.Congress.DataStructure.User>



    <script type="text/javascript">
        function PaymentDetails(id) {

            if (id != "") {
                ShowModal("@Url.Content("/Payment/Transaction/LookUPTransactionDetails?Id=")" + id);
            }

        }
        function LookUpForm(id) {
            if (id != "") {
                ShowModal("@Url.Content("~/Congress/User/Details?Id=")" + id);
            }

        }
        function Paymentorder(Id) {
            if (Id != "") {
                ShowModal("@Url.Content("/Payment/UserTransaction/LookUPUserTransaction?Id=")" + Id + "&callbackurl='@Url.Content("~/Congress/UserPanel/UserTemps")'");
            }
        }
    </script>

    @if (Model != null)
    {
        if (Model.Count() > 1)
        {
            <div class="grid-guid">
                <div class="grid-guid-title">
                    @Resources.Common.Help
                </div>
                <ul>
                    <li>
                        <img src="/Content/Images/details.png">
                        @Resources.Common.Detail
                    </li>
                    <li>
                        <img src="/Content/Images/Delete-Close.png">
                        @Resources.Common.Delete
                    </li>
                    <li>
                        <img src="/Content/Images/edit.png">
                        @Resources.Common.Edit
                    </li>
                </ul>
            </div>
            <div class="fit">

                @{
                    Html.Radyn().Grid(Model).Name("Grid").HtmlAttributes(new { style = "width:98%;margin: 0 auto" }).Columns(columns =>
                    {
                        columns.Template(user => user.Username).Title(Resources.Congress.UserName).Width(200).HeaderHtmlAttributes(new { style = "text-align:center" });
                        columns.Template(user => user.Number).Title(Resources.Congress.Number).Width(100).HeaderHtmlAttributes(new { style = "text-align:center" });
                        columns.Template(user => user.EnterpriseNode.RealEnterpriseNode.FirstName).Title(Resources.EnterPriseNode.FirstName).Width(100).HeaderHtmlAttributes(new { style = "text-align:center" });
                        columns.Template(user => user.EnterpriseNode.RealEnterpriseNode.LastName).Title(Resources.EnterPriseNode.LastName).Width(100).HeaderHtmlAttributes(new { style = "text-align:center" });
                        columns.Template(user => user.RegisterDate).Title(Resources.Congress.RegisterDate).Width(100).HeaderHtmlAttributes(new { style = "text-align:center" });
                        columns.Template(user => user.Status.ToString().ToEnum<Enums.UserStatus>().GetDescriptionInLocalization()).Title(Resources.Congress.Status).Width(100).HeaderHtmlAttributes(new { style = "text-align:center" });
                        columns.Template(user =>
                            "<a style='cursor: pointer;'  onclick=\"LookUpForm('" + user.Id + "')\"  >" +
                            " <img width='18' align='absmiddle' title='" + Resources.Common.Detail + "' src='" + Url.Content("~/Content/Images/details.png") + "' />" + "</a>  ").Width(100).Encode(false).Filterable(false);
                    })
                                //                        .Scrollable(scrolling => scrolling.Enabled(false).Height(500))
                                //                        .Selectable(x => x.Enabled(true))
                                .Sortable(sorting => sorting.Enabled(true))
                                .Pageable(paging => paging.Enabled(false))
                                .Filterable(filtering => filtering.Enabled(true))
                                //                        .Footer(false)
                                .Render();
                }
            </div>

        }
        else
        {
            var getmodel = Model.FirstOrDefault();
            if (ViewBag.isdirty)
            {
                <div class="fit" style="color: green;font-size: 20px;">
                    @Resources.Congress.ThisUseralreadybeenapprovedInCongress
                </div>
                <br />
            }
            <div class="fit">

                <div class="width20percent ">

                    @if (getmodel.EnterpriseNode.PictureId.HasValue)
                    {
                        Html.RadynFile().Image().ID(getmodel.EnterpriseNode.PictureId.Value).Height(200).Width(200).Render();
                    }

                </div>
                <div class="fit">
                    <div class="item-row">
                        <div class="table-row-cap">
                            <div class="item">
                                @Resources.Congress.Number
                            </div>
                        </div>
                        <div class="table-row-item table-c-fit">
                            <div class="item">
                                @getmodel.Number
                            </div>
                        </div>
                    </div>
                    <div class="item-row">
                        <div class="table-row-cap">
                            <div class="item">
                                @Resources.Congress.UserName
                            </div>
                        </div>
                        <div class="table-row-item table-c-fit">
                            <div class="item">
                                @getmodel.Username
                            </div>
                        </div>
                    </div>
                    <div id="divEnterpriseNodeModify">
                        @if (getmodel.EnterpriseNode.PrefixTitleId.HasValue)
                        {
                            <div class="item-row">
                                <div class="table-row-cap">
                                    <div class="item">
                                        @Resources.EnterPriseNode.PrefixTitle

                                    </div>
                                </div>
                                <div class="table-row-item table-c-fit">
                                    <div class="item">
                                        @getmodel.EnterpriseNode.PrefixTitle.Title
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="item-row">
                            <div class="table-row-cap">
                                <div class="item">
                                    @Resources.EnterPriseNode.FirstName

                                </div>
                            </div>
                            <div class="table-row-item table-c-fit">
                                <div class="item">
                                    @getmodel.EnterpriseNode.RealEnterpriseNode.FirstName
                                </div>
                            </div>
                        </div>
                        <div class="item-row">
                            <div class="table-row-cap">
                                <div class="item">
                                    @Resources.EnterPriseNode.LastName
                                </div>
                            </div>
                            <div class="table-row-item table-c-fit">
                                <div class="item">
                                    @getmodel.EnterpriseNode.RealEnterpriseNode.LastName
                                </div>
                            </div>
                        </div>
                        <div class="item-row">
                            <div class="table-row-cap">
                                <div class="item">
                                    @Resources.EnterPriseNode.Gender

                                </div>
                            </div>
                            <div class="table-row-item table-c-fit ">
                                <div class="item">
                                    @((getmodel.EnterpriseNode.RealEnterpriseNode.Gender.HasValue && (bool)getmodel.EnterpriseNode.RealEnterpriseNode.Gender) ? Resources.EnterPriseNode.Male : Resources.EnterPriseNode.Female)
                                </div>
                            </div>
                        </div>
                        <div class="item-row">
                            <div class="table-row-cap">
                                <div class="item">
                                    @Resources.EnterPriseNode.Email
                                </div>
                            </div>
                            <div class="table-row-item table-c-fit">
                                <div class="item">
                                    @getmodel.EnterpriseNode.Email
                                </div>
                            </div>
                        </div>
                        <div class="item-row">
                            <div class="table-row-cap">
                                <div class="item">
                                    @Resources.EnterPriseNode.Cellphone
                                </div>
                            </div>
                            <div class="table-row-item table-c-fit">
                                <div class="item">
                                    @getmodel.EnterpriseNode.Cellphone
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="Form-Generator-editor">
                        @{
                            Html.FormGenerator(AppExtention.CongressMoudelName + "-/Congress/Userpanel/Complete", getmodel.GetType().Name, getmodel.Id.ToString(), FormState.DetailsMode);
                        }
                    </div>
                </div>

            </div>

        }
    }
    else
    {
        <div class="fit" style="color: red;font-size: 20px;">
            @Resources.Congress.UserNotFound
        </div>

    }
