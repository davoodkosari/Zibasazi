@using System.Drawing
@using Radyn.Congress.DataStructure
@using Radyn.FormGenerator.Tools
@using Radyn.Web.Mvc;
@using Radyn.WebApp.AppCode.Security
@using Radyn.WebApp.Areas.Congress.Tools
@using Radyn.WebApp.Areas.FormGenerator.Tools
@model System.Collections.Generic.IEnumerable<Radyn.Congress.DataStructure.User>
    @{
        ViewBag.Title = Resources.Congress.Userlist;
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    @section Head{
        <script type="text/javascript">
            function UpdateUser() {
                ShowPostBackLoader();
                $.post('@Url.Content("~/Congress/User/UpdateList")', $('form[action^="@Url.Content("~/Congress/User")"]').serialize(), function (data) {
                    if (data != "false") {
                        ShowRadynMessage();
                        SearchUser();
                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();

                });
            }

            function DeleteUser(Id) {
                
                if (confirm('@Resources.Common.Are_You_Soure_For_Delete')) {
                    $.get("@Url.Content("~/Congress/User/DeleteUser")", { Id: Id, date: new Date().getTime() }, function (data) {
                        
                        if (data != "false") {
                            SearchUser();
                        }
                        ShowRadynMessage();

                    });
                    ShowRadynMessage();
                }
            }

            function SearchUser() {

                ShowPostBackLoader();
                $("#DivResultSearchUser").html("");
                $.post("@Url.Content("~/Congress/User/Index")", $('form[action^="@Url.Content("~/Congress/User")"]').serialize(), function (data) {
                    if (data != "false") {
                        $("#DivResultSearchUser").html(data).hide();
                        $("#DivResultSearchUser").slideDown();

                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();

                });
            }

            function GetAllUser() {

                $("#txtSearch").val("");
                SearchUser();

            }

            function PrintList() {
                ShowPostBackLoader();
                $.post("@Url.Content("~/Congress/ReportPanel/PrintUserList")", $('form[action^="@Url.Content("~/Congress/User")"]').serialize(), function (data) {
                    if (data != "false") {
                         window.open('@Url.Content("~/ReportBuilder/ReportView")');
                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();
                });
            }

            function ExportListToExcel() {
                ShowPostBackLoader();
                $.post("@Url.Content("~/Congress/User/ExportToExcel")", $('form[action^="@Url.Content("~/Congress/User")"]').serialize(), function (data) {

                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();
                });
            }
            function DesignUserReport() {
                ShowPostBackLoader();
                $.post("@Url.Content("~/Congress/ReportPanel/DesigneUserReport")", $('form[action^="@Url.Content("~/Congress/User")"]').serialize(), function (data) {
                    if (data.Result != false) {
                        window.open("@Url.Content("~/ReportBuilder/ReportDesign?DataMethod=PreaperReport")&DataMethodParamets=" + data.ReportId + "&UpdateMethod=UpdateReport&UpdateParametrs=" + data.ReportId);
                    }
                    ShowRadynMessage();
                }).complete(function () {
                    HidePostBackLoader();
                });
            }
            $(document).ready(function () {
                SearchUser();


            });
            function SimilarUser() {
                ShowModal("@Url.Content("~/Congress/User/LookUPSimilarUser")");

            }
            function Create() {
                ShowModal("@Url.Content("~/Congress/User/Create")");

            }
        </script>
        <style>
            .lbl-test .table-row-item.width80percent {
                width: 79.6% !important;
            }
        </style>
    }
    @section PageTitle{
        @Resources.Common.List  @Resources.Security.Users
    }
    @section PageAction
{

        <div class="button-div m-btn waves-blue i-add">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.NewUser).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Add.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "Create();" }).Render(); }
        </div>
        <div class="button-div m-btn waves-green i-save" id="BtnUpdate2">
            @{Html.Radyn().ImageActionLink().Text(Resources.Common.SaveChanges).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Save.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "UpdateUser()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-blue i-print" id="BtnReport">
            @{Html.Radyn().ImageActionLink().Text(Resources.Common.PrintList).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/printer.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "PrintList()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-purple i-brush" id="DivUserReport">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.DesignUserReport).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/certificate-design.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "DesignUserReport()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-yellow i-users" id="BtnGetAll">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.ViewAllUser).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/UserList.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "GetAllUser()" }).Render(); }
        </div>
        @if (SessionParameters.CurrentCongress != null && SessionParameters.CurrentCongress.Configuration != null && SessionParameters.CurrentCongress.Configuration.AccessToUserImportFromExcel)
        {
            <div class="button-div m-btn waves-blue i-excel">
                @{ Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/User/ImportFromExcel")).ImageWidth("20").ImageHeight("20").Text(Resources.Congress.ImportFromExcel).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Microsoft-Office-Excel-icon.png")).ImagePosition(ImageActionLink.Position.Right).Render(); }
            </div>
        }

        <div class="button-div m-btn waves-blue i-excel">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/User/ExportToExcel")).ImageWidth("20").ImageHeight("20").Text(Resources.Congress.ExportToExcel).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Microsoft-Office-Excel-icon.png")).ImagePosition(ImageActionLink.Position.Right).Render(); }
        </div>
        <div class="button-div m-btn waves-red i-return">
            @{Html.Radyn().ImageActionLink().Text(Resources.Common.Return).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/go-back.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "window.location='/Security/User/Menu?oid=" + Radyn.Common.Constants.OperationId.CongressOperationId + "'" }).Render(); }
        </div>
    }
    @section PageActionDown
{

        <div class="button-div m-btn waves-blue i-add">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.NewUser).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Add.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "Create();" }).Render(); }

        </div>
        <div class="button-div m-btn waves-green i-save" id="BtnUpdate1">
            @{Html.Radyn().ImageActionLink().Text(Resources.Common.SaveChanges).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Save.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "UpdateUser()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-blue i-print" id="BtnReport1">
            @{Html.Radyn().ImageActionLink().Text(Resources.Common.PrintList).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/printer.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "PrintList()" }).Render(); }
        </div>
        <div class="button-div m-btn waves-purple i-brush" id="DivUserReport1">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.DesignUserReport).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/certificate-design.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "DesignUserReport()" }).Render(); }
        </div>
       
        <div class="button-div m-btn waves-yellow i-users" id="BtnGetAll2">
            @{Html.Radyn().ImageActionLink().Text(Resources.Congress.ViewAllUser).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/UserList.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "GetAllUser()" }).Render(); }
        </div>
        @if (SessionParameters.CurrentCongress != null && SessionParameters.CurrentCongress.Configuration != null && SessionParameters.CurrentCongress.Configuration.AccessToUserImportFromExcel)
        {
            <div class="button-div m-btn waves-blue i-excel">
                @{ Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/User/ImportFromExcel")).ImageWidth("20").ImageHeight("20").Text(Resources.Congress.ImportFromExcel).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Microsoft-Office-Excel-icon.png")).ImagePosition(ImageActionLink.Position.Right).Render(); }
            </div>
        }

        <div class="button-div m-btn waves-blue i-excel">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/User/ExportToExcel")).ImageWidth("20").ImageHeight("20").Text(Resources.Congress.ExportToExcel).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Microsoft-Office-Excel-icon.png")).ImagePosition(ImageActionLink.Position.Right).Render(); }
        </div>
        <div class="button-div m-btn waves-red i-return">
            @{Html.Radyn().ImageActionLink().Text(Resources.Common.Return).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/go-back.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "window.location='/Security/User/Menu?oid=" + Radyn.Common.Constants.OperationId.CongressOperationId + "'" }).Render(); }
        </div>
    }
    <input type="hidden" value="false" id="SearchAll" name="SearchAll" />

    <div class="radynForm">
        <div class="table-row-roller cursor-pointer" onclick="slide('advance-user-search');">
            <div class="item">
                @Resources.Congress.Search
                <span class="arrow toButton Basic-Attachment advance-user-search"></span>
            </div>
        </div>
        <div class="fit advanceSetting" id="advance-user-search">
            <div class="item-row fit">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.User
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item">
                        @Html.TextBox("txtSearch")

                    </div>
                </div>

            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.Status
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item">
                        @Html.DropDownList("Search_Status", new SelectList(ViewBag.SearchstatusList, "Key", "Value"), "" + Resources.Congress.All + "")
                    </div>
                </div>
            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.EnterPriseNode.Gender
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item">
                        @Html.DropDownList("Search_Gender", new SelectList(ViewBag.GenderList, "Key", "Value"), "" + Resources.Congress.All + "")
                    </div>
                </div>
            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.PaymentType
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item">
                        @Html.DropDownList("Search_PaymentTypeId", new SelectList(ViewBag.PaymentTypeList, "Key", "Value"), "" + Resources.Congress.All + "")
                    </div>
                </div>
            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">

                        @Resources.Congress.HasOtherPayState
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item">
                        @Html.DropDownList("HasValueStatus", new SelectList(ViewBag.HasValueList, "Key", "Value"))
                    </div>
                </div>
            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.ChairStatus
                    </div>
                </div>

                <div class="table-row-item ">
                    <div class="item">
                        @Html.DropDownList("Search_ChairStatus", new SelectList(ViewBag.UserChairStatusList, "Key", "Value"), "" + Resources.Congress.All + "")
                    </div>
                </div>

            </div>





            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.SortUser
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item">
                        @Html.DropDownList("SortUser", new SelectList(ViewBag.SortUser, "Key", "Value"))
                    </div>
                </div>
            </div>

            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.AscendingDescending
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item">
                        @Html.DropDownList("AscendingDescending", new SelectList(ViewBag.AscendingDescending, "Key", "Value"))

                    </div>
                </div>
            </div>
            <div class="item-row ">
                <div class="table-row-cap">
                    <div class="item">
                        @Resources.Congress.RegisterDate
                    </div>
                </div>
                <div class="table-row-item ">
                    <div class="item date-picker">
                        @{Html.Radyn().PersianDateTimePicker().Name("RegisterDate").Render(); }

                    </div>
                </div>
            </div>
            <div class="item-row fit ">
                <div class="button-div m-btn waves-blue i-search" id="BtnSearch">
                    @{Html.Radyn().ImageActionLink().Align(ImageActionLink.Alignment.Right).Text(@Resources.Common.Search).ImageUrl(Url.Content("~/Content/Images/search_button.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "SearchUser();" }).Render(); }
                </div>
                <div class="button-div m-btn waves-yellow i-refresh" id="BtnSearch1" >
                    @{Html.Radyn().ImageActionLink().Text(Resources.Congress.Refresh).Align(ImageActionLink.Alignment.Right).ImageUrl(Url.Content("/Areas/Congress/Content/Images/reload-icon.png")).OtherAttribute(new { onclick = "SearchUser();" }).ImagePosition(ImageActionLink.Position.Left).ImageWidth("28").ImageHeight("28").Render(); }
                </div>
                <div class="page-align" id="BtnSearch2" style="visibility: hidden">

                    @{Html.Radyn().ImageActionLink().Text(Resources.Congress.SimilarUser).Align(ImageActionLink.Alignment.Right).ImageUrl(Url.Content("/Areas/Congress/Content/Images/SimilarUser.png")).ImagePosition(ImageActionLink.Position.Right).OtherAttribute(new { onclick = "SimilarUser();" }).Render(); }




                </div>
            </div>
            <div class="lbl-test">
                @{
                    Html.FormReportGenerator(AppExtention.CongressMoudelName + "-/Congress/Userpanel/Complete");
                }

            </div>
        </div>

        <div class="grid-guid">
            <div class="grid-guid-title">
                @Resources.Common.Help
            </div>
            <ul>
                <li>
                    <img src="/Content/Images/details.png">
                    @Resources.Common.Detail
                </li>
                <li>
                    <img src="/Content/Images/Delete-Close.png">
                    @Resources.Common.Delete
                </li>
                <li>
                    <img src="/Content/Images/edit.png">
                    @Resources.Common.Edit
                </li>
                <li>
                    <img src="/Areas/Congress/Content/Images/Loginas.png">
                    @Resources.Security.Login
                </li>
                <li>

                    <img src="/Areas/Congress/Content/Images/detail-pays.png">
                    @Resources.Payment.PaymentDetails
                </li>
                <li>
                    <img src="/Areas/Congress/Content/Images/payment-detailsOK.png"> | <img src="/Areas/Congress/Content/Images/payment-details.png">
                    @Resources.Payment.Paymentorder
                </li>
                <li>
                    <img src="/Areas/Congress/Content/Images/group-register.png">
                    @Resources.Congress.RegisterGroup
                </li>
                <li>
                    <img src="/Areas/Congress/Content/Images/payment-order.png">
                    @Resources.Congress.HasOtherPay
                </li>
            </ul>
        </div>
        <div class="fit" id="DivResultSearchUser">
        </div>
    </div>
