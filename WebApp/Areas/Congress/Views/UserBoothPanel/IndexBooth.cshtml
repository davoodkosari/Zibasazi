@using Radyn.Congress.Tools
@using Radyn.Utility
@using Radyn.Web.Mvc;
@using Radyn.WebApp.AppCode.Security

@model IEnumerable<Radyn.Congress.DataStructure.UserBooth>
    @{
        ViewBag.Title = Resources.Congress.YourRezervedBooth;
        Layout = "~/Areas/Congress/Views/Shared/CongressUserLayout.cshtml";
    }
    @section Head{
        <script type="text/javascript">
            function PrintBoothOfficerCards(boothId) {
                $("#BtnReport").hide();
                $("#BtnReport1").hide();
                $("#divSearchload").show();
                $.get("@Url.Content("~/Congress/ReportPanel/PrintBoothOfficerCards")", { userId: '@SessionParameters.CongressUser.Id', boothId: boothId, date: new Date().getTime() }, function (data) {
                    if (data != "false") {
                         window.open('@Url.Content("~/ReportBuilder/ReportView")');
                    }
                    ShowRadynMessage();
                }).complete(function () {
                    $("#BtnReport").show();
                    $("#BtnReport1").show();
                    $("#divSearchload").hide();
                });
            }
        </script>
    }
    @section PageTitle
{
        @Resources.Congress.YourRezervedBooth

    }
    @section PageAction
{
        <div class="button-div m-btn waves-blue i-add">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/UserBoothPanel/CreateBooth")).Text(Resources.Congress.ReserveBoothNew).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Add.png")).ImagePosition(ImageActionLink.Position.Right).ImageWidth("24").ImageHeight("24").Render(); }
        </div>
        <div class="button-div m-btn waves-red i-return">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/UserPanel/Home")).Text(Resources.Common.Return).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/go-back.png")).ImagePosition(ImageActionLink.Position.Right).Render();}
        </div>
    }
    @section PageActionDown
{
        <div class="button-div m-btn waves-blue i-add">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/UserBoothPanel/CreateBooth")).Text(Resources.Congress.ReserveBoothNew).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/Add.png")).ImagePosition(ImageActionLink.Position.Right).ImageWidth("24").ImageHeight("24").Render(); }
        </div>
        <div class="button-div m-btn waves-red i-return">
            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/UserPanel/Home")).Text(Resources.Common.Return).Align(ImageActionLink.Alignment.Left).ImageUrl(Url.Content("~/Content/Images/go-back.png")).ImagePosition(ImageActionLink.Position.Right).Render();}
        </div>
    }
    <div class="radynForm">

        @if (Model.Any())
        {
            Html.Radyn().Grid(Model).Name("Grid").HtmlAttributes(new { style = "width:98%;margin: 0 auto" }).Columns(columns =>
            {
                columns.Template(userBooth => userBooth.Booth.Code).Title(Resources.Congress.Booth).Width(100).HeaderHtmlAttributes(new { style = "text-align:center" });
                columns.Template(booth => booth.Booth.ValidCost + " " + booth.Booth.CurrencyType.ToEnum<Radyn.Common.Definition.Enums.CurrencyType>().GetDescriptionInLocalization()).Title(Resources.Congress.Cost).Width(80).HeaderHtmlAttributes(new { style = "text-align:center" });

                columns.Template(workShopUser => workShopUser.RegisterDate).Title(@Resources.Congress.RegisterDate).Width(50).HeaderHtmlAttributes(new { style = "text-align:center" });
                columns.Template(userBooth => userBooth.Booth.Location).Title(Resources.Congress.Address).Width(300).HeaderHtmlAttributes(new { style = "text-align:center" });
                columns.Template(userBooth => userBooth.Status.ToString().ToEnum<Enums.RezervState>().GetDescriptionInLocalization()).Title(Resources.Congress.Status).Width(100).HeaderHtmlAttributes(new { style = "text-align:center" });
                columns.Template(userBooth => "<a href='" + Url.Content("~/Congress/UserBoothPanel/DetailsBooth?BoothId=" + userBooth.BoothId + "&UserId=" + userBooth.UserId) + "'> <img width='18' align='absmiddle' title='" + Resources.Common.Detail + "' src='" + Url.Content("~/Content/Images/details.png") + "' /></a>"
                    + (userBooth.Status != (byte)Enums.RezervState.Finalconfirm ? ((" | " + "<a href='" + Url.Content("~/Congress/UserBoothPanel/EditBooth?BoothId=" + userBooth.BoothId + "&UserId=" + userBooth.UserId) + "'> <img width='18' align='absmiddle' title='" + Resources.Common.Edit + "' src='" + Url.Content("/Content/Images/edit.png") + "' /></a> | ") +
                    "<a href='" + Url.Content("~/Congress/UserBoothPanel/DeleteBooth?BoothId=" + userBooth.BoothId + "&UserId=" + userBooth.UserId) + "'> <img width='18' align='absmiddle' title='" + Resources.Common.Delete + "' src='" + Url.Content("/Content/Images/Delete-Close.png") + "' /></a>  ") : "") +
                     (userBooth.Status == (byte)Enums.RezervState.PayConfirm || userBooth.Status == (byte)Enums.RezervState.Finalconfirm ? " | <img alt='" + Resources.Common.Print + " " + Resources.Congress.Card + "'  style='cursor: pointer' align='absmiddle' width = '18px;'  src='" + Url.Content("~/Content/Images/printer-certificate.png") + "'    onclick=\"PrintBoothOfficerCards('" + userBooth.BoothId + "');\" />" : "")).Width(300).Encode(false).Filterable(false);
            })
          //
          .Sortable(sorting => sorting.Enabled(true))
          .Pageable(paging => paging.Enabled(true))
          .Filterable(filtering => filtering.Enabled(true))
          //  .Footer(true)
          .Render();
        }
        else
        {
            @Resources.Congress.YouNotRezervedHotel
        }
    </div>
