@using Radyn.Congress.Tools
@using Radyn.FileManager
@using Radyn.Web.Mvc
@using Radyn.Utility
@using Radyn.Web.Mvc.Utility
@using Radyn.WebApp.AppCode.Security
@using Radyn.WebApp.Areas.Congress.Tools
@using Radyn.WebApp.Areas.EnterpriseNode.ExtentionTools
@{
    Layout = "~/Views/Shared/MainLayout.cshtml";
}
@section Head{

    @{Html.Radyn().Theme("MainBase").Render();}
    @{Html.Radyn().Theme("Common").Render();}
    <!--[if gte IE 9]
        <style type="text/css">
            .gradient {
                filter: none;
            }
        </style>
    <![endif]-->
    @RenderSection("Head")
    <script>
        function arrow(name) {
            $('.' + name).toggleClass('toButton totop');
        }

        function slide(id) {
            $("#" + id).slideToggle(500);
            arrow(id);
        }

        $(function () {
            $('.container-hd-header-item').addClass("table-row-roller");
        });
    </script>

    <style>
        .toggled {
            overflow: hidden;
        }
    </style>
    <script>
        $(document)
            .ready(function () {

                $(".menu-user").click(function () {});
                $('body').on('click',function () {$(".menu-user").removeClass("open");});
                $(".menu-user").on('click',function (event) {$(".menu-user").toggleClass("open");
                            event.stopPropagation();
                        });
                //if (!$.browser.webkit) {
                //    $('.navigation-menu').addClass('nav-control');
                //}
            });
    </script>

    <link href="/Scripts/Radyn/RadynMenu/css/MainMenu.css" rel="stylesheet" />
    <link href="/Scripts/Radyn/RadynMenu/css/MainMenu-@(Resources.Design.Direction).css" rel="stylesheet" />
    <!-- Start----Runtime-->
    @{Html.HtmlEncoder(AppExtention.GetCongressResources(Enums.UseLayout.Layout)); }
    <!-- END----Runtime-->

}

@using (Html.BeginForm())
{
    @*    <div class="sheet">*@

    <div class="content">

        <div class="toggled" id="wrapper">
            <div class="sidenav close-nav ">
                <nav class=" r-nav navigation-menu sidenav close-nav ">
                    @{Html.RenderAction("GenerateMenu", "User", new { area = "Security" });}
                </nav>
            </div>
            <div class="fit" id="page-content-wrapper">

                <div class="header">
                    <div class="radynbar">
                        @{ Html.RenderAction("SelectDropCongress", "Homa", new { area = "Congress" }); }
                        @if (SessionParameters.Error != null)
                        {
                            <div class="row-header">
                                <div class="alert-message error">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    @SessionParameters.Error.Value.Key
                                </div>
                            </div>
                        }
                        <div class="top-menu-icon">
                            <a href="~/Security/User/Logout" class="hint--bottom" data-hint="@Resources.Common.Logout" target="_self">
                                <img style="width: 24px; height: 24px; margin-right: 10px;" src="~/Content/Images/power.png" />
                            </a>
                        </div>
                        <div class="top-menu-icon">

                            <a class="hint--bottom" data-hint="@Resources.Common.AskForBackUp" target="blank" href="http://crm.radyn.ir/">
                                <img class="img-menu" style="width: 24px; height: 24px;" src="@Url.Content("~/Content/Images/supporter.png")" />
                            </a>
                        </div>
                        <div class="top-menu-icon ">
                            @if (User.Identity.IsAuthenticated)
                            {
                                <a class="hint--bottom" data-hint="@Resources.Common.Home" href="@Url.Content("~/Account/Index")">
                                    <img style="margin-left: 10px;" src="@Url.Content("~/Content/Images/go-home.png")" />
                                </a>
                            }
                        </div>
                        <div class="top-menu-icon ">

                            <a class="hint--bottom" data-hint="@Resources.Common.HelpDoc" href="https://ehamayesh.com/UserGuid.pdf" download="راهنما">
                                <img class="help-file" src="@Url.Content("~/Content/Images/information.png")" />
                            </a>
                        </div>
                    </div>
                    <div class="radynbar-menu">
                        <div class="panel-language">
                            @{ Html.RenderAction("CultureBar", "Language", new { area = "Common" }); }
                           
                        </div>
                        @{
                            if (User.Identity.IsAuthenticated)
                            {
                                <div class="top-menu-icon menu-user-profile">
                                    <a class="hint--bottom" data-hint="@Resources.Common.CurrentUser">
                                        <img src="@(Radyn.WebApp.Areas.Common.Tools.AppExtentions.GetCurrentUserImageUrl())" />

                                    </a>
                                    <span>@(SessionParameters.User != null ? SessionParameters.User.DescriptionField : "")</span>

                                </div>




                            }
                            else
                            {

                                if (SessionParameters.CongressUser != null)
                                {
                                    <div class="top-menu-icon">
                                        <a class="hint--bottom " data-hint="@Resources.Common.Logout">
                                            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/UserPanel/Logout")).Align(Resources.Common.Aligment.ToEnum<ImageActionLink.Alignment>()).ImageUrl(Url.Content("~/Content/Images/exit.png")).Render(); }
                                            @SessionParameters.CongressUser.EnterpriseNode.DescriptionField
                                        </a>
                                    </div>

                                }
                                if (SessionParameters.CongressReferee != null)
                                {
                                    <div class="top-menu-icon">
                                        <a class="hint--bottom " data-hint="@Resources.Common.Logout">
                                            @{Html.Radyn().ImageActionLink().NavigateUrl(Url.Content("~/Congress/RefereePanel/Logout")).Align(Resources.Common.Aligment.ToEnum<ImageActionLink.Alignment>()).ImageUrl(Url.Content("~/Content/Images/exit.png")).Render(); }
                                            @SessionParameters.CongressReferee.EnterpriseNode.EnterpriseNodeTitle()
                                        </a>
                                    </div>

                                }
                            }
                        }









                    </div>
                </div>
                <div class="innerRL">
                    <div class="page-caption">
                        <span></span>
                        <p>
                            @RenderSection("PageTitle", false)
                        </p>
                    </div>
                    <div class="c-widget">
                        <div class="c-widget-head">
                            <div class="page-action-title">
                                @RenderSection("PageAction", false)
                            </div>
                        </div>
                        <div class="c-widget-content">

                            @if (this.Context.Items["radynHelp"] != null)
                            {
                                Html.HtmlEncoder(this.Context.Items["radynHelp"].ToString());
                            }
                            @RenderBody()
                        </div>
                        <div class="c-widget-footer">
                            <div class="page-action-title">
                                @RenderSection("PageActionDown", false)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
    </div>
    <script>
        $(document).ready(function () {
            $("form").attr("enctype", "multipart/form-data");

        });
    </script>
}
<div>
</div>
<!-- Menu Toggle Script -->
<script>
    //    $("#menu-toggle").click(function (e) {
    //        e.preventDefault();
    //        $("#wrapper").toggleClass("toggled");
    //    });
    $("#sidebar-wrapper")
        .mouseover(function () {
            $("#wrapper").removeClass("toggled");
        })
        .mouseout(function () {
            $("#wrapper").addClass("toggled");
        });
</script>